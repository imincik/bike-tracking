# Bike tracking

Location tracking for my MTB adventures using [Owntracks](https://owntracks.org/).


## Test VM

* Launch test VM
```bash
nix run .#vm
```


## AWS EC2 deployment

* Launch NixOS [AMI](https://nixos.github.io/amis/) (`t2.small` instance)

* Enable Flakes
```bash
mkdir -p ~/.config/nix
echo "experimental-features = nix-command flakes" >> ~/.config/nix/nix.conf
```

* Deploy
```bash
nixos-rebuild switch --flake github:imincik/bike-tracking#ec2
```

* Allow following SG inbound rules
```
  - TCP: port 80, 0.0.0.0/0
```

* Generate application credentials and phone configuration file
```
tracker-generate-password
```


## Phone configuration

* Install Owntracks app (available for Android and iOS)

* Load `phone-config.otrc` file generated by
  `tracker-generate-password` command
